<h1 style = "text-align: center;">Equipment Reservations</h1>

<% flash.each do |type, msg| %>
  <div>
    <%= msg %>
  </div>
<% end %>

<style>
body {
  background-color: Black;
  opacity: 0.8;
  color: white;
}
table.center {
  margin-left:auto;
  margin-right:auto;
  color: white;
}
</style>

<div class="reservations index">
    <h3 style = "text-align: center;"> Select a Date for Reservation </h3>
    <div class="reservation dates">
        <%= form_for(@reservation, :url => reservations_equip_reserve_path, :method => 'post') do |f| %>
            <table class="center" summary="date dropdown">
                <tr>
                    <th><%= f.label "Reserve Date" %></th>
                    <td><%= f.date_field(:checkout_date, min: 8.days.from_now, max: 1.year.from_now)%></td>
                </tr>
                <tr>
                    <th>Event Description</th>
                    <td><%= f.text_field(:event_description) %></td>
                </tr>
            </table>
            <div class="form-buttons" style = "text-align: center;">
                <%= f.submit("Pick Date") %>
            </div>
        <% end %>
    </div>
    <br/>
</div>
<br/>

<h4 style = "text-align: center;">My Future Reservations</h4>
<div class="table">
    <table class="center" summary="Equipment List">
        <tr class="header">
            <th style="padding:0 15px;"> ID </th>
            <th style="padding:0 15px;"> Name </th>
            <th style="padding:0 15px;"> Description </th>
            <th style="padding:0 15px;"> Reserved Date </th>
            <th style="padding:0 15px;"> Return By Date </th>
            <th style="padding:0 15px;"> Actions </th>
        </tr>
        <% current_account.reservations.each do |reservation| %>
        <% if reservation.future_equip_id != nil %>
        <% @future_item = Equipment.find(reservation.future_equip_id) %>
        <tr>
            <td style="padding:0 15px;"><%= @future_item.id%></td>
            <td style="padding:0 15px;"><%= @future_item.name%></td>
            <td style="padding:0 15px;"><%= @future_item.description%></td>
            <td style="padding:0 15px;"><%= reservation.checkout_date %></td>
            <td style="padding:0 15px;"><%= reservation.checkin_date %></td>
            <td style="padding:0 15px;"class="actions">
                <%= link_to("Cancel", cancel_item_reservation_path(reservation), :class => "action cancel_item") %>
            </td>
        </tr>
        <% end %>
        <% end %>
    </table>
</div>
